# ABC-XYZ Baseline (legacy)

- **Владелец документа:** Иван Петров, Product Owner (Forecast NOW!)
- **Freeze изменений:** 2026-02-13
- **Источник baseline:** legacy-руководство по экрану `анализ:abc-xyz`.

## 1) Layout

### 1.1 Левая панель
- Дерево навигации по классификациям/разделам анализа.
- Переход в режимы, связанные с анализами (в т.ч. «Вид классификации – анализы, анализ – ABC»).

### 1.2 Toolbar (верхняя панель действий)
- Основные действия запуска и настройки анализа.
- Доступ к пунктам меню «Вид», в т.ч. подменю для табличного отображения.

### 1.3 Рабочая область
- Табличный/графический вывод результатов ABC-XYZ анализа.
- Поддерживается представление «карта» (для одного параметра анализа).
- Для результата доступны разрезы по складам/группам/подгруппам/товарам.

### 1.4 Модалки
- «Параметры анализа» — настройка осей, границ и параметров запуска.
- «Установка уровня сервиса» — назначение сервисного уровня по комбинациям ABC/XYZ.

## 2) Контролы и тексты кнопок/пунктов меню (legacy labels)

> Ниже зафиксированы подписи, встречающиеся в текущем legacy-интерфейсе/руководстве.

- Кнопка запуска: **«Провести анализ по группе»**.
- Меню отображения: **«Вид»**.
- Переход в режимы анализа: **«Вид классификации – анализы, анализ – ABC»**.
- Пункт табличного вывода колонок: **«Вид-Анализ-ABC-XYZ»**.
- Единицы отображения: **«Вид - Единицы измерения»**.
- Массовое применение в сервисном уровне: **«Применить для всех»**.

## 3) Поведение dropdown

### 3.1 Dropdown «Провести анализ по группе»
- Перед запуском должны быть выбраны: тип(ы) анализа, параметры, период, группировка данных.
- Рекомендуемый сценарий legacy: сначала запуск по всем товарам, затем детализация по нужной группе.
- После запуска результаты доступны в графическом и табличном виде.

### 3.2 Dropdown «Вид»
- Переключает представление результатов (таблица/карта и связанные режимы).
- Через «Вид-Анализ-ABC-XYZ» добавляются столбцы свойств/параметров/результатов анализов.
- Через «Вид - Единицы измерения» меняются единицы отображения значений в таблице.

## 4) Модалка «Параметры анализа»

### 4.1 Поля
- Ось **X**.
- Ось **Y**.
- Ось **Z** (для трехфакторного сценария).
- Границы групп **A / B / C** (пороговые значения отнесения).

### 4.2 Чекбоксы
- Чекбоксы выбора типов анализа (ABC/XYZ/XYZ без нулей/FMR).
- Чекбоксы/переключатели режимов расчета (в т.ч. изолированно по подгруппам, суммарно по складам — если активированы в контексте сценария).

## 5) Модалка «Установка уровня сервиса»

### 5.1 Матрица комбинаций
- 9 комбинаций: **AA, AB, AC, BA, BB, BC, CA, CB, CC**.

### 5.2 Дефолты
- Дефолтные значения подставляются из действующих настроек параметров сервиса в системе (legacy-поведение).

### 5.3 Массовое применение
- Кнопка **«Применить для всех»** выполняет массовую запись уровней сервиса.
- Для мультивыбора складов legacy-сценарий фиксирует раздельную установку по группам каждого склада при использовании «Применить для всех».

## 6) Чек-лист приемки “как в legacy”

### 6.1 Состояние Loading
- [ ] При запуске «Провести анализ по группе» отображается загрузка до получения результата.
- [ ] Элементы управления, критичные к консистентности расчета, заблокированы на время загрузки.
- [ ] После завершения загрузки отображается актуальный вид (таблица/карта) без ручного обновления.

### 6.2 Состояние Empty
- [ ] При отсутствии данных за период отображается пустое состояние без падения экрана.
- [ ] Пустое состояние не ломает меню «Вид» и повторный запуск анализа.
- [ ] В модалках «Параметры анализа» и «Установка уровня сервиса» сохраняется корректная доступность полей.

### 6.3 Состояние Error
- [ ] При ошибке расчета пользователь получает явный признак ошибки (сообщение/состояние).
- [ ] После ошибки доступен повторный запуск «Провести анализ по группе».
- [ ] Ошибка не приводит к потере выбранных параметров осей/границ/типов анализа.

### 6.4 Состояние Data
- [ ] Результаты отображаются в табличном и графическом виде.
- [ ] Переключение через «Вид» работает без перезапуска страницы.
- [ ] Модалка «Параметры анализа» корректно применяет X/Y/Z и границы A/B/C.
- [ ] Модалка «Установка уровня сервиса» содержит 9 комбинаций AA..CC и массовое применение «Применить для всех».
- [ ] Добавление колонок через «Вид-Анализ-ABC-XYZ» и смена единиц через «Вид - Единицы измерения» применяются к таблице.
